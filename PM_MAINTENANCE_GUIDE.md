# ProductFlow 产品经理维护指南

> 专为不懂技术的产品经理编写，帮助您独立维护和优化 ProductFlow

---

## 目录

1. [快速上手](#快速上手)
2. [常见问题与解决方案](#常见问题与解决方案)
3. [如何与 AI 协作开发](#如何与-ai-协作开发)
4. [避免常见陷阱](#避免常见陷阱)
5. [推荐的 Vibe Coding 工作流](#推荐的-vibe-coding-工作流)

---

## 快速上手

### 1. 本地运行项目

```bash
# 1. 进入项目目录
cd productflow-showcase

# 2. 安装依赖（只需运行一次）
pnpm install

# 3. 启动开发服务器
pnpm dev
```

启动后，浏览器访问 `http://localhost:3000` 即可看到应用。

### 2. 项目结构（您需要关注的部分）

```
productflow-showcase/
├── client/src/pages/          # 前端页面（您会经常修改这里）
│   ├── Home.tsx              # 首页（项目列表）
│   └── ProjectDetail.tsx     # 项目详情页（核心工作流界面）
├── client/src/components/    # 可复用的 UI 组件
├── server/routers.ts         # 后端 API（添加新功能时会修改）
├── server/workflow-engine.ts # AI 工作流引擎（核心逻辑）
└── drizzle/schema.ts         # 数据库表结构
```

**记住：**
- 前端代码在 `client/` 目录
- 后端代码在 `server/` 目录
- 数据库相关在 `drizzle/` 目录

---

## 常见问题与解决方案

### 问题 1：修改代码后页面没有变化

**原因：** 浏览器缓存或开发服务器未自动刷新

**解决方案：**
```bash
# 1. 停止开发服务器（按 Ctrl+C）
# 2. 重新启动
pnpm dev

# 3. 在浏览器中强制刷新（Ctrl+Shift+R 或 Cmd+Shift+R）
```

### 问题 2：数据库报错 "Table doesn't exist"

**原因：** 修改了 `drizzle/schema.ts` 但没有同步到数据库

**解决方案：**
```bash
pnpm db:push
```

**记住：** 每次修改 `drizzle/schema.ts` 后都要运行这个命令！

### 问题 3：AI 生成的内容不符合预期

**原因：** Prompt 设计不够清晰或上下文不足

**解决方案：**
1. 打开 `server/workflow-engine.ts`
2. 找到对应步骤的 Prompt（搜索 `Step ${stepNumber}:`）
3. 在 Prompt 中添加更具体的指导，例如：
   ```typescript
   const prompt = `
   你是一个专业的产品经理助手。

   **重要：请严格按照以下格式输出**
   - 使用 Markdown 格式
   - 每个功能点独立成段
   - 包含具体的用户场景描述

   用户需求：${context}
   `;
   ```

### 问题 4：页面样式乱了

**原因：** Tailwind CSS 类名冲突或语法错误

**解决方案：**
1. 检查是否有拼写错误（如 `clasName` 而不是 `className`）
2. 检查 Tailwind 类名是否正确（参考 [Tailwind 文档](https://tailwindcss.com/docs)）
3. 使用浏览器开发者工具（F12）查看实际应用的样式

---

## 如何与 AI 协作开发

### 1. 提需求的正确姿势

**❌ 错误示例：**
> "帮我把页面做得好看一点"

**✅ 正确示例：**
> "请优化 ProjectDetail 页面的视觉设计：
> 1. 将左侧进度条改为卡片式设计，增加阴影效果
> 2. 当前步骤高亮显示，使用渐变背景
> 3. 添加步骤完成的动画效果
> 4. 参考 Linear 或 Notion 的设计风格"

**关键要素：**
- 明确指出要修改的文件或组件
- 描述具体的视觉效果
- 提供参考案例或设计风格
- 分点列出需求，避免模糊描述

### 2. 分步验证，避免"一坨屎"

**推荐工作流：**

```
第1步：提出需求 → AI 生成代码
第2步：立即测试 → 发现问题
第3步：要求修复 → AI 修复代码
第4步：再次测试 → 确认可用
第5步：保存 checkpoint → 继续下一个功能
```

**❌ 避免：**
- 一次性提出 10 个需求
- 不测试就继续提下一个需求
- 发现问题后不停地说"继续"

**✅ 正确做法：**
- 每完成一个小功能就测试
- 发现问题立即指出，不要等到最后
- 定期保存 checkpoint（类似游戏存档）

### 3. 使用"检查清单"确保质量

在每次让 AI 修改代码后，按照这个清单检查：

- [ ] 页面能正常打开吗？
- [ ] 按钮点击有反应吗？
- [ ] 数据能正确显示吗？
- [ ] 有没有报错信息（F12 查看控制台）？
- [ ] 样式是否符合预期？

如果有任何一项不通过，立即要求 AI 修复，不要继续添加新功能。

---

## 避免常见陷阱

### 陷阱 1：过度依赖 AI 的判断

**场景：** AI 说"这个功能很复杂，建议简化"

**问题：** AI 可能低估了您的需求重要性

**解决：** 坚持您的需求，但要求 AI 分步实现：
> "我理解这个功能复杂，但它对用户体验很重要。请先实现基础版本，然后我们再逐步优化。"

### 陷阱 2：不敢质疑 AI 的代码

**场景：** AI 生成的代码看起来很复杂，您不确定是否正确

**问题：** 复杂不代表正确，可能是过度设计

**解决：** 要求 AI 解释代码逻辑：
> "请用非技术语言解释这段代码的作用，以及为什么要这样实现。"

### 陷阱 3：忽略错误信息

**场景：** 浏览器控制台（F12）出现红色错误，但页面"看起来"能用

**问题：** 错误会累积，最终导致整个应用崩溃

**解决：** 立即截图错误信息，发给 AI：
> "控制台出现以下错误：[粘贴错误信息]。请帮我修复。"

---

## 推荐的 Vibe Coding 工作流

### 场景 1：优化页面视觉效果

**目标：** 让 ProductFlow 的界面更专业、更现代

**步骤：**

1. **找参考**
   - 浏览 [Dribbble](https://dribbble.com/) 或 [Behance](https://www.behance.net/)
   - 搜索关键词："SaaS dashboard"、"workflow app"、"project management"
   - 截图 2-3 个您喜欢的设计

2. **描述需求**
   ```
   请参考附件中的设计风格，优化 ProjectDetail 页面：
   1. 使用柔和的渐变背景（参考图 1）
   2. 步骤卡片采用玻璃拟态设计（参考图 2）
   3. 添加微动画：鼠标悬停时卡片轻微上浮
   4. 配色方案：主色调使用深蓝色 (#1E40AF)，强调色使用琥珀色 (#F59E0B)
   ```

3. **验证效果**
   - 打开页面，逐一检查每个改动
   - 使用不同屏幕尺寸测试（手机、平板、桌面）

4. **微调**
   - 如果某个颜色不合适：
     > "琥珀色太亮了，请改为柔和一点的橙色 (#FB923C)"
   - 如果动画太快：
     > "悬停动画改为 0.3 秒的缓动效果"

### 场景 2：添加新功能

**目标：** 在项目列表页添加"搜索"功能

**步骤：**

1. **明确需求**
   ```
   在 Home.tsx 页面的项目列表上方添加搜索框：
   - 用户输入关键词后，实时过滤项目列表
   - 支持按项目标题和原始需求内容搜索
   - 搜索框样式参考 shadcn/ui 的 Input 组件
   ```

2. **分步实现**
   - 第 1 步：只添加搜索框 UI（不实现功能）
   - 第 2 步：实现前端过滤逻辑
   - 第 3 步：测试边界情况（空搜索、特殊字符等）

3. **测试清单**
   - [ ] 搜索框能正常输入
   - [ ] 输入关键词后列表实时更新
   - [ ] 清空搜索框后显示全部项目
   - [ ] 搜索不到结果时显示"无匹配项目"

### 场景 3：修复 Bug

**目标：** 解决"步骤跳过后页面不刷新"的问题

**步骤：**

1. **复现 Bug**
   - 详细记录操作步骤：
     1. 打开项目详情页
     2. 点击"跳过步骤"按钮
     3. 页面没有自动刷新到下一步

2. **描述给 AI**
   ```
   在 ProjectDetail.tsx 中，handleSkipStep 函数执行后，
   页面没有自动刷新到下一步。请修复这个问题。

   期望行为：点击"跳过步骤"后，页面应该自动显示下一步的内容。
   ```

3. **验证修复**
   - 重新执行相同的操作步骤
   - 确认问题已解决
   - 测试其他相关功能是否受影响

---

## 推荐的 Skills 和工具

### 前端优化 Skills

1. **设计系统 Skill**
   - 如何使用 shadcn/ui 组件库
   - 如何自定义 Tailwind 配色
   - 如何实现响应式设计

2. **动画效果 Skill**
   - 使用 Framer Motion 添加页面过渡
   - 实现加载动画和骨架屏
   - 优化用户交互反馈

### 后端开发 Skills

1. **API 设计 Skill**
   - 如何设计清晰的 tRPC procedures
   - 如何处理错误和异常
   - 如何优化数据库查询

2. **AI 集成 Skill**
   - 如何优化 Prompt 设计
   - 如何处理 AI 超时和失败
   - 如何实现流式输出

---

## 最后的建议

1. **保持耐心**
   - Vibe Coding 不是魔法，需要多次迭代
   - 每次改动都要测试，不要急于求成

2. **记录问题**
   - 遇到问题时截图保存
   - 记录您的操作步骤，方便复现

3. **定期备份**
   - 每完成一个功能就保存 checkpoint
   - 定期导出代码到本地

4. **持续学习**
   - 阅读 [Tailwind CSS 文档](https://tailwindcss.com/docs)
   - 了解基本的 React 概念（组件、状态、Props）
   - 学习使用浏览器开发者工具（F12）

---

**祝您开发顺利！如果遇到问题，随时回来查阅这份指南。**
